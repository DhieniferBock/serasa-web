<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
  	<title>Listagem de empresas</title>
  	
  	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
  	<script src="/js/bootstrap.min.js"></script>
  	<link rel="stylesheet" href="/css/bootstrap.min.css"/>
</head>
 
<body>
	<div class="container">
		<h1 class="page-header">Importação e listagem de empresas e suas pontuações
			<small class="text-muted">Selecione o arquivo .csv e clique no botão "Exportar"</small>
		</h1>
		
		<form method="POST" enctype="multipart/form-data" action="/exportar">
		    <div class="custom-file mb-3">
		    	<input type="file" class="custom-file-input" id="file" name=file>
		    	<label class="custom-file-label" for="customFile">Escolha o arquivo</label>
		  	</div>
		
		  	<div class="mt-1">
		    	<button type="submit" class="btn btn-primary">Exportar</button>
		  	</div>
		</form>
		<div class="mb-3"></div>
		<table class="table table-hover">
		  <thead>
		    <tr>
		      <th>Cód</th>
		      <th>Nome</th>
		      <th>Confiabilidade</th>
		    </tr>
		  </thead>
		  <tbody>
		    <tr th:each="empresa: ${empresas}">  
		      <td th:text="${empresa.id}"></td>
		      <td th:text="${empresa.nome}"></td>
		      <td th:text="${empresa.pontuacao} + '%'"></td>
		    </tr>
		  </tbody>
		</table>
	</div>
	
	<script>
		// Add the following code if you want the name of the file appear on select
		$(".custom-file-input").on("change", function() {
			var fileName = $(this).val().split("\\").pop();
			$(this).siblings(".custom-file-label").addClass("selected").html(fileName);
		});
	</script>
	
</body>
</html>